worker_processes auto;

events {
  worker_connections 1024;
}

http {
  include mime.types;
  default_type application/octet-stream;
  sendfile on;
  
  server {
    listen <%= ENV["PORT"] %>;
    server_name _;
    keepalive_timeout 5;
    client_max_body_size 50M;
    
    root /app/dist;  # This should point to your built files directory
    
    location / {
      try_files $uri $uri/ /index.html;
      add_header Cache-Control "no-store, no-cache";
    }
    
    location ~* \.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|otf)$ {
      expires 30d;
      add_header Cache-Control "public, max-age=2592000";
    }
  }
}